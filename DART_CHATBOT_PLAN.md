# 📊 DART 데이터 기반 주식 챗봇 활용 방안

## 🎯 현재 수집 중인 데이터

### ✅ 재무제표 (financials_*.csv)
- **재무상태표 (BS)**: 자산, 부채, 자본
- **손익계산서 (IS)**: 매출, 영업이익, 당기순이익
- **현금흐름표 (CF)**: 영업/투자/재무 활동 현금흐름
- 수집 주기: 사업보고서(연간), 반기, 분기

### ✅ 공시 목록 (filings_*.csv)
- 최근 30일간 공시 내역
- 공시명, 공시일자, 접수번호

---

## 🚀 단계별 챗봇 기능 구현 로드맵

### 📌 1단계: 기본 재무 분석 (즉시 구현 가능)

#### 1-1. 재무 건전성 자동 분석
**구현 방법**: 수집된 재무제표 데이터로 자동 계산

**주요 지표**:
```python
# 수익성 지표
- ROE (자기자본이익률) = 당기순이익 / 자기자본 × 100
- ROA (총자산이익률) = 당기순이익 / 자산총계 × 100
- 영업이익률 = 영업이익 / 매출액 × 100

# 안정성 지표
- 부채비율 = 부채총계 / 자본총계 × 100
- 유동비율 = 유동자산 / 유동부채 × 100
- 당좌비율 = (유동자산 - 재고자산) / 유동부채 × 100

# 성장성 지표
- 매출액 성장률 = (당기 매출액 - 전기 매출액) / 전기 매출액 × 100
- 영업이익 성장률 = (당기 영업이익 - 전기 영업이익) / 전기 영업이익 × 100
```

**챗봇 응답 예시**:
```
사용자: "삼성전자 재무 건전성 평가해줘"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 삼성전자 재무 건전성 평가
━━━━━━━━━━━━━━━━━━━━━━━━━━
기준: 2024년 사업보고서

【 수익성 】 ⭐⭐⭐⭐☆
├ ROE: 9.2% (양호)
├ ROA: 7.1% (양호)
└ 영업이익률: 15.3% (우수)

【 안정성 】 ⭐⭐⭐⭐⭐
├ 부채비율: 27.9% (매우 안전)
├ 유동비율: 202.0% (안전)
└ 현금: 53.7조원 (충분)

【 성장성 】 ⭐⭐⭐☆☆
├ 매출 성장: +12.7%
└ 영업이익 성장: -15.2% (감소)

💡 종합 평가: B+ (양호)
⚠️ 영업이익 감소 모니터링 필요
```

#### 1-2. 동종업계 비교
**구현**: 같은 업종 종목들의 재무지표 비교

```
사용자: "삼성전자 vs SK하이닉스 재무 비교"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 반도체 업종 재무 비교
━━━━━━━━━━━━━━━━━━━━━━━━━━
                삼성전자    SK하이닉스
매출액          302.2조     73.7조
영업이익률      15.3%       32.1% ✅
ROE             9.2%        18.5% ✅
부채비율        27.9% ✅    44.2%
현금            53.7조 ✅   9.8조

🏆 우위 지표
삼성전자: 부채비율, 현금 보유
SK하이닉스: 수익성 (ROE, 영업이익률)
```

#### 1-3. 실시간 공시 모니터링
**구현**: filings 데이터 분석 + 중요도 판단

```
사용자: "카카오 최근 공시 정리해줘"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
📢 카카오 최근 공시 (30일)
━━━━━━━━━━━━━━━━━━━━━━━━━━
🔴 중요 (3건)
├ [11/15] 주요사항보고서
│  → 자회사 주식 양도 결정
├ [11/10] 분기보고서 (3Q)
│  → 실적 발표
└ [11/05] 타법인 주식 취득

🟡 일반 (7건)
├ [11/12] 임원 변동
├ [11/08] 감사보고서 제출
└ ... 5건 더보기

💡 투자 포인트:
자회사 매각으로 현금 유입 예상
```

---

### 📌 2단계: 추가 DART 데이터 수집 (확장 기능)

#### 2-1. 배당 정보 API
**API**: `dividend` (배당금 지급 내역)

**수집 데이터**:
- 배당 기준일, 배당금, 배당 수익률
- 과거 배당 이력

**챗봇 활용**:
```
사용자: "삼성전자 배당 정보"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
💰 삼성전자 배당 분석
━━━━━━━━━━━━━━━━━━━━━━━━━━
📅 2024년 배당금
├ 중간: 361원
└ 기말: 361원 (예상)
💵 연간 총 배당: 722원
📊 배당 수익률: 1.2%

【 배당 이력 】
2023년: 1,444원
2022년: 1,444원
2021년: 1,444원

⚠️ 전년 대비 50% 감소
💡 배당 수익률 낮음 → 성장주 특성
```

#### 2-2. 최대주주 지분 변동 API
**API**: `majorstock` (최대주주 변동 내역)

**수집 데이터**:
- 최대주주명, 보유 주식 수, 지분율
- 변동 일자, 변동 사유

**챗봇 활용**:
```
사용자: "네이버 최대주주 지분율"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
👥 네이버 주요 주주 현황
━━━━━━━━━━━━━━━━━━━━━━━━━━
1위: 국민연금 (10.2%)
2위: 이해진 (4.5%)
3위: 외국인 투자자 (52.3%)

【 최근 변동 】
[11/10] 국민연금 +0.3%p
[10/25] 자사주 매입 1.2%

💡 외국인 보유 비중 높음 → 글로벌 관심
```

#### 2-3. 증자/감자 정보 API
**API**: `irdsStat` (증자/감자 현황)

**챗봇 활용**:
```
사용자: "SK하이닉스 증자 계획"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
📈 SK하이닉스 자본 변동
━━━━━━━━━━━━━━━━━━━━━━━━━━
최근 증자: 없음
자사주 소각: 2024.08 (100만주)

💡 분석:
- 증자 없이 사업 확장 (재무 건전)
- 자사주 소각으로 주주가치 제고
```

#### 2-4. 임원/직원 보수 API
**API**: `exctvpay` (임원 보수 현황)

**챗봇 활용**:
```
사용자: "카카오 임원 보수"

챗�bot:
━━━━━━━━━━━━━━━━━━━━━━━━━━
💼 카카오 임원 보수 (2024)
━━━━━━━━━━━━━━━━━━━━━━━━━━
등기임원 평균: 8.5억원
미등기임원 평균: 3.2억원
총 보수: 127억원 (15명)

📊 업계 비교: 평균 수준
```

#### 2-5. 기업 개황 정보 API
**API**: `company` (기업 개요)

**수집 데이터**:
- 업종, 대표자, 홈페이지, 주소
- 상장일, 결산월, 종업원 수

**챗봇 활용**:
```
사용자: "LG화학 기업 정보"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
🏢 LG화학 기업 개요
━━━━━━━━━━━━━━━━━━━━━━━━━━
업종: 화학 제품 제조
대표: 신학철
상장: 2001.04.25
종업원: 17,523명
주요 사업: 석유화학, 첨단소재, 배터리
```

#### 2-6. 지속가능경영 보고서 API
**API**: `sustainReport` (ESG 보고서)

**챗봇 활용**:
```
사용자: "삼성전자 ESG 평가"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
🌱 삼성전자 ESG 현황
━━━━━━━━━━━━━━━━━━━━━━━━━━
최근 보고서: 2024 지속가능경영

【 주요 목표 】
- 2050 탄소중립 달성
- 재생에너지 100% 전환 (2027)
- 여성 임원 비율 25%

📊 ESG 등급: A (우수)
```

---

### 📌 3단계: AI 분석 기능 (고급)

#### 3-1. 재무제표 이상 탐지
**기술**: 머신러닝 기반 이상 패턴 감지

```
챗봇:
⚠️ 이상 징후 감지!

종목: OO전자
━━━━━━━━━━━━━━━━━━━━━━━━━━
1. 매출채권 회전율 급감 (-45%)
   → 대금 회수 지연 가능성

2. 재고자산 급증 (+78%)
   → 판매 부진 or 재고 누적

3. 차입금 의존도 상승
   → 이자 부담 증가 우려

💡 추천: 추가 모니터링 필요
```

#### 3-2. 실적 예측
**기술**: 과거 재무 데이터 기반 시계열 예측

```
사용자: "삼성전자 내년 실적 예측"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
🔮 삼성전자 2025년 실적 예측
━━━━━━━━━━━━━━━━━━━━━━━━━━
매출액: 318조원 (+5.2%)
영업이익: 48조원 (+8.1%)
당기순이익: 39조원 (+6.5%)

【 예측 근거 】
- 반도체 경기 회복 (메모리 가격 ↑)
- 스마트폰 판매 안정세
- AI 칩 수요 증가

⚠️ 변동 가능 요인:
- 환율, 중국 경기, 반도체 재고

신뢰도: 73%
```

#### 3-3. 공시 분석 & 요약
**기술**: NLP 기반 공시문 자동 요약

```
사용자: "네이버 3분기 실적 공시 요약"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
📄 네이버 3Q 실적 보고서 요약
━━━━━━━━━━━━━━━━━━━━━━━━━━
【 핵심 요약 】
✅ 매출 23.7조 (+11% YoY)
✅ 영업이익 4.2조 (+41% YoY)
✅ 검색 광고 성장 지속
⚠️ 커머스 부문 적자 지속

【 주요 이슈 】
- 라인야후 통합 진행 중
- AI 서비스 투자 확대
- 웹툰 글로벌 성장 가속

💰 투자 의견: 매수 유지
목표 주가: 285,000원
```

---

## 🛠️ 구현 우선순위

### ⭐ 최우선 (즉시 구현)
1. **재무 건전성 자동 분석** (기존 데이터 활용)
   - ROE, 부채비율, 유동비율 자동 계산
   - 안전성/수익성 점수화

2. **실시간 공시 알림** (기존 filings 데이터)
   - 중요 공시 필터링
   - 공시별 중요도 태그

### ⭐⭐ 2순위 (추가 데이터 수집)
3. **배당 분석** (dividend API)
4. **최대주주 현황** (majorstock API)
5. **동종업계 비교** (여러 종목 재무제표 비교)

### ⭐⭐⭐ 3순위 (고급 분석)
6. **실적 예측** (ML 모델)
7. **공시문 AI 요약** (NLP)
8. **이상 징후 탐지** (통계 분석)

---

## 💻 기술 스택 제안

### 백엔드 (데이터 처리)
- **Python**: 데이터 수집/분석
- **Pandas**: 재무제표 계산
- **scikit-learn**: 머신러닝 예측

### 프론트엔드 (챗봇 인터페이스)
- **KakaoTalk 챗봇 API**: 메시지 송수신
- **FastAPI/Flask**: 백엔드 서버
- **Celery**: 백그라운드 데이터 수집

### 차트 시각화
- **Plotly**: 인터랙티브 차트 (현재 사용 중)
- **이미지 생성 → 카카오톡 전송**

---

## 🎯 최종 챗봇 UX 예시

```
사용자: "삼성전자"

챗봇:
━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 삼성전자 (005930)
━━━━━━━━━━━━━━━━━━━━━━━━━━
💰 현재가: 71,300원 (▼ 1.2%)
📈 RSI: 45.2 (중립)

【 오늘의 분석 】
✅ 재무 건전성: A- (우수)
📊 수익성: ROE 9.2%
💵 배당 수익률: 1.2%

【 최근 공시 】
[어제] 3분기 실적 공시
→ 영업이익 6.6조 (+277% YoY)

━━━━━━━━━━━━━━━━━━━━━━━━━━
🔽 더 알아보기
1️⃣ 재무제표 상세
2️⃣ 차트 보기
3️⃣ 공시 전체 목록
4️⃣ 실적 예측
```

---

## 📋 다음 단계 액션 아이템

### 즉시 실행 가능
- [ ] `stock_analyzer.py`에 재무지표 계산 함수 추가
- [ ] 재무 건전성 자동 평가 로직 구현
- [ ] 공시 중요도 필터링 로직

### 추가 구현 필요
- [ ] DART API 추가 엔드포인트 연동 (배당, 주주 등)
- [ ] KakaoTalk 챗봇 API 연동
- [ ] 차트 이미지 생성 → 카카오톡 전송 파이프라인

### 고급 기능
- [ ] ML 기반 실적 예측 모델 훈련
- [ ] NLP 기반 공시문 요약
- [ ] 이상 징후 탐지 알고리즘
